"use strict";var m=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var y=(e,t)=>{for(var r in t)m(e,r,{get:t[r],enumerable:!0})},w=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of S(t))!T.call(e,s)&&s!==r&&m(e,s,{get:()=>t[s],enumerable:!(n=h(t,s))||n.enumerable});return e};var M=e=>w(m({},"__esModule",{value:!0}),e);var O={};y(O,{default:()=>P});module.exports=M(O);var a=require("@raycast/api");var u=require("@raycast/api");var i=require("fs"),d=require("path");var l=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var o=require("@raycast/api");var J=u.environment.supportPath+"/customTimers.json",R=u.environment.supportPath+"/defaultPresetVisibles.json",f=e=>{try{(0,i.unlinkSync)(e)}catch(t){if(t instanceof Error&&!t.message.includes("ENOENT"))throw t}};function p(e){let t=u.environment.supportPath+"/"+e,r=t.replace(".timer",".dismiss");f(t),f(r)}function g(){let e=[];return(0,i.readdirSync)(u.environment.supportPath).forEach(r=>{if((0,d.extname)(r)==".timer"){let n={name:"",secondsSet:-99,timeLeft:-99,originalFile:r,timeEnds:new Date};n.name=(0,i.readFileSync)(u.environment.supportPath+"/"+r).toString();let s=r.split("---");n.secondsSet=Number(s[1].split(".")[0]);let c=s[0].replace(/__/g,":");n.timeLeft=Math.max(0,Math.round(n.secondsSet-l({d2:c}))),n.timeEnds=new Date(c),n.timeEnds.setSeconds(n.timeEnds.getSeconds()+n.secondsSet),e.push(n)}}),e.sort((r,n)=>r.timeLeft-n.timeLeft),e}var P=async()=>{let e=g();if(e.length===0)return await(0,a.showToast)({style:a.Toast.Style.Failure,title:"No timers found!"});p(e[0].originalFile),await(0,a.closeMainWindow)(),(0,a.showHUD)(`Timer "${e[0].name}" stopped!`)};
